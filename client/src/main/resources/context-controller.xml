<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright 2017 Skolkovo Institute of Science and Technology
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <import resource="context-base.xml"/>
    <import resource="context-model.xml"/>
    <import resource="context-service.xml"/>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.MainController" init-method="init"
          destroy-method="destroy">
        <property name="modelEditingController" ref="modelEditingController"/>
        <property name="applicationSettings" ref="applicationSettings"/>
        <property name="actionLogger" ref="actionLogger"/>
        <property name="project" ref="project"/>
        <property name="guiService" ref="guiService"/>
        <property name="studyService" ref="studyService"/>
        <property name="fileStorageService" ref="fileStorageService"/>
        <property name="differenceMergeService" ref="differenceMergeService"/>
        <property name="updateService" ref="updateService"/>
        <property name="repositorySchemeService" ref="repositorySchemeService"/>
        <property name="logEntryService" ref="logEntryService"/>
        <property name="systemBuilderFactory" ref="systemBuilderFactory"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
        <property name="executor" ref="executor"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.ChangeAnalysisController">
        <property name="project" ref="project"/>
        <property name="parameterModelRepository" ref="parameterModelRevisionRepository"/>
    </bean>

    <bean id="modelEditingController" class="ru.skoltech.cedl.dataexchange.ui.controller.ModelEditingController">
        <property name="project" ref="project"/>
        <property name="actionLogger" ref="actionLogger"/>
        <property name="userRoleManagementService" ref="userRoleManagementService"/>
        <property name="modelUpdateService" ref="modelUpdateService"/>
        <property name="guiService" ref="guiService"/>
        <property name="parameterEditorController" ref="parameterEditorController"/>
        <property name="externalModelEditorController" ref="externalModelEditorController"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
    </bean>

    <bean id="parameterEditorController" class="ru.skoltech.cedl.dataexchange.ui.controller.ParameterEditorController">
        <property name="project" ref="project"/>
        <property name="actionLogger" ref="actionLogger"/>
        <property name="guiService" ref="guiService"/>
        <property name="modelUpdateService" ref="modelUpdateService"/>
        <property name="unitManagementService" ref="unitManagementService"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
        <property name="externalModelFileWatcher" ref="externalModelFileWatcher"/>
    </bean>

    <bean id="externalModelEditorController"
          class="ru.skoltech.cedl.dataexchange.ui.controller.ExternalModelEditorController">
        <property name="project" ref="project"/>
        <property name="actionLogger" ref="actionLogger"/>
        <property name="guiService" ref="guiService"/>
        <property name="fileStorageService" ref="fileStorageService"/>
        <property name="modelUpdateService" ref="modelUpdateService"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.ExternalModelController" scope="prototype">
        <property name="project" ref="project"/>
        <property name="spreadsheetInputOutputExtractorService" ref="spreadsheetInputOutputExtractorService"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.TagController" scope="prototype">
        <property name="studyService" ref="studyService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.DiffController">
        <property name="project" ref="project"/>
        <property name="userRoleManagementService" ref="userRoleManagementService"/>
        <property name="differenceMergeService" ref="differenceMergeService"/>
        <property name="tradespaceRepository" ref="tradespaceRepository"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
        <property name="executor" ref="executor"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.ConsistencyController">
        <property name="project" ref="project"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.DependencyController">
        <property name="project" ref="project"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.DsmController">
        <property name="project" ref="project"/>
        <property name="guiService" ref="guiService"/>
        <property name="parameterLinkRegistry" ref="parameterLinkRegistry"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.TradespaceController">
        <property name="project" ref="project"/>
        <property name="applicationSettings" ref="applicationSettings"/>
        <property name="tradespaceModelBridge" ref="tradespaceModelBridge"/>
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.FiguresOfMeritEditorController" scope="prototype">
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.FigureOfMeritController" scope="prototype">
        <property name="tradespaceModelBridge" ref="tradespaceModelBridge"/>
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.StudyRevisionsController" scope="prototype">
        <property name="studyService" ref="studyService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.UserManagementController">
        <property name="project" ref="project"/>
        <property name="guiService" ref="guiService"/>
        <property name="userRoleManagementService" ref="userRoleManagementService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.UserEditingController" scope="prototype"/>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.UserRoleManagementController">
        <property name="project" ref="project"/>
        <property name="userRoleManagementService" ref="userRoleManagementService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.UnitManagementController">
        <property name="project" ref="project"/>
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.AddUnitController" scope="prototype">
        <property name="project" ref="project"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.RevisionHistoryController" scope="prototype">
        <property name="parameterModelService" ref="parameterModelService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.ProjectSettingsController">
        <property name="project" ref="project"/>
        <property name="applicationSettings" ref="applicationSettings"/>
        <property name="userManagementService" ref="userManagementService"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.ReferenceSelectorController" scope="prototype">
        <property name="project" ref="project"/>
        <property name="externalModelFileHandler" ref="externalModelFileHandler"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.ParameterSelectorController" scope="prototype"/>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.CalculationController" scope="prototype">
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.CalculationArgumentController" scope="prototype">
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.AboutController">
        <property name="guiService" ref="guiService"/>
    </bean>

    <bean class="ru.skoltech.cedl.dataexchange.ui.controller.GuideController">
        <property name="guiService" ref="guiService"/>
    </bean>

</beans>